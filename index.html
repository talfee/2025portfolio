<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Home</title>
    <link rel="stylesheet" href="styles.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet"/>
    <style>
        .project-preview {
            position: relative;
        }
        .project-preview .connectors {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            overflow: visible;
        }
        .connector-line {
            fill: none;
            stroke: var(--primary);
            stroke-width: 2;
            transition: stroke-dashoffset 1s ease-out;
        }
        .connector-line.visible {
            stroke-dashoffset: 0;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="index.html#home"    class="nav-link">Home</a></li>
                <li><a href="about.html#about"   class="nav-link">About Me</a></li>
                <li><a href="projects.html#projects" class="nav-link">Projects</a></li>
                <li><a href="contact.html#contact"   class="nav-link">Contact</a></li>
            </ul>
        </nav>
    </header>

    <main class="home-page">
        <section id="home" class="section-content home-section">
            <h1>Hello!<br>I'm Talia.</h1>
            <p>Scroll down to see some of my projects; to see more, check out the Projects tab!</p>

            <div class="project-preview">
                <svg class="connectors" xmlns="http://www.w3.org/2000/svg"></svg>

                <div class="project-item right" id="item-1">
                    <article class="project-card">
                        <h2>Project One</h2>
                        <ul>
                            <li>Resume point A</li>
                            <li>Feature X</li>
                            <li>Whatever</li>
                        </ul>
                    </article>
                </div>

                <div class="project-item left" id="item-2">
                    <article class="project-card">
                        <h2>Project Two</h2>
                        <ul>
                            <li>Resume point B</li>
                            <li>Feature Y</li>
                            <li>Whatever</li>
                        </ul>
                    </article>
                </div>

                <div class="project-item right" id="item-3">
                    <article class="project-card">
                        <h2>Project Three</h2>
                        <ul>
                            <li>Resume point C</li>
                            <li>Feature Z</li>
                            <li>Whatever</li>
                        </ul>
                    </article>
                </div>
            </div>

            <p class="center-link">
                <a href="projects.html#projects">View more of my projects in more detail here!</a>
            </p>
        </section>
    </main>

    <script>
        (function() {
            const preview = document.querySelector('.project-preview');
            const svg     = preview.querySelector('.connectors');
            const items   = Array.from(preview.querySelectorAll('.project-item'));
            const ns      = 'http://www.w3.org/2000/svg';

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && entry.target !== items[0]) {
                        const idx  = items.indexOf(entry.target);
                        const path = svg.children[idx - 1];
                        path.classList.add('visible');
                    }
                });
            }, { threshold: 0.5 });

            function drawConnectors() {
                const { left: px, top: py, width, height } = preview.getBoundingClientRect();
                svg.setAttribute('width',  width);
                svg.setAttribute('height', height);
                svg.setAttribute('viewBox', `0 0 ${width} ${height}`);
                svg.innerHTML = '';

                items.forEach((item, i) => {
                    if (i === 0) return;
                    const prev = items[i - 1];
                    const r1 = prev.getBoundingClientRect();
                    const r2 = item.getBoundingClientRect();
                    const x1 = (r1.left  - px) + r1.width  / 2;
                    const y1 = (r1.bottom - py);
                    const x2 = (r2.left  - px) + r2.width  / 2;
                    const y2 = (r2.top    - py);

                    const path = document.createElementNS(ns, 'path');
                    path.setAttribute('d', `
                        M ${x1},${y1}
                        C ${x1},${(y1 + y2)/2}
                            ${x2},${(y1 + y2)/2}
                            ${x2},${y2}
                    `);
                    path.classList.add('connector-line');

                    const len = path.getTotalLength();
                    path.style.strokeDasharray  = len;
                    path.style.strokeDashoffset = len;

                    svg.appendChild(path);
                });

                items.forEach(item => observer.observe(item));
            }

            window.addEventListener('load',   drawConnectors);
            window.addEventListener('resize', drawConnectors);
        })();
    </script>

    <script>
        (function() {
            const root = document.documentElement;
            window.addEventListener('pointermove', e => {
                const x = (e.clientX / window.innerWidth) * 100;
                const y = (e.clientY / window.innerHeight) * 100;
                root.style.setProperty('--cursorX', `${x}%`);
                root.style.setProperty('--cursorY', `${y}%`);
            });
        })();
    </script>
</body>
</html>
